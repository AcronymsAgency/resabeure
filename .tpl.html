<!doctype html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>üç∑üçæ</title>
    <link rel="icon" type="image/x-icon" href="favicon.svg">
    <link rel="stylesheet" href="pico.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <span class="logo"><img src="https://raulillana.com/res/avatar_raul_illana.jpg"></span>
        <br>
        <label for="language-switcher">Select Language:</label>
        <select id="language-switcher" onchange="translatePage()">
            <option value="ca" selected>Catal√†</option>
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="fr">Fran√ßais</option>
            <option value="de">Deutsch</option>
        </select>
    </header>

    <main>
        <table role="grid">
            <thead>
                <tr><th colspan="2"><h2 class="tac">NOMBRE VINO</h2></th></tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2"><strong>Ingredients:</strong> Ra√Øm, √Äcids afegits (√Äcid m√†lic, √Äcid tart√†ric), Conservant (Sulfits), Estabilitizador (Goma ar√†biga, √Äcid fum√†ric)</td>
                </tr>
                <tr>
                    <td colspan="2" class="tac"><br>Porci√≥ mitjana de consum: 100ml</td>
                </tr>
                <tr>
                    <td>Valor energ√®tic</td>
                    <td>266.44 kj<br>63.68 Kcal</td>
                </tr>
                <tr>
                    <td>Greix<br>&nbsp;&nbsp;√Äcids grassos saturats</td>
                    <td>0 gr<br>0 gr</td>
                </tr>
                <tr>
                    <td>Hidrats de carboni<br>&nbsp;&nbsp;Sucres</td>
                    <td>0.02 gr<br>0.02 gr</td>
                </tr>
                <tr>
                    <td>Fibra aliment√†ria</td>
                    <td>0 gr</td>
                </tr>
                <tr>
                    <td>Prote√Ønes</td>
                    <td>0 gr</td>
                </tr>
                <tr>
                    <td>Sal</td>
                    <td>0 gr</td>
                </tr>
                <tr>
                    <td>Grau d'alcohol</td>
                    <td>11.5 %</td>
                </tr>
            </tbody>
        </table>
    </main>

    <footer>¬© üç∑üçæ.ws</footer>

    <script>
        async function translatePage() {
            const language = document.getElementById("language-switcher").value;

            // Get the entire HTML content
            const htmlContent = document.documentElement.outerHTML;

            // Call the Netlify function to translate the HTML file
            const response = await fetch("/.netlify/functions/translateHtmlFile", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    htmlContent: htmlContent,
                    sourceLang: "ca",
                    targetLang: language
                })
            });

            if (response.ok) {
                const translatedHtml = await response.text();
                document.open(); // Clear the current document
                document.write(translatedHtml); // Write the translated HTML
                document.close(); // Close document for rendering
            } else {
                console.error("Translation failed:", response.statusText);
            }
        }
    </script>
</body>
</html>